<%= form_for([:admin, @resource], html: { class: 'form m-admin-body' }) do |f| %>
<section class="m-admin-body--main">
  <% if @resource.errors.any? %>
    <div>
      <h2><%= pluralize(@resource.errors.count, "error") %> prohibited this <%= @resource.class.to_s.downcase %> from being saved:</h2>
      <ul>
      <% @resource.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <%= resource_type_picker(f, :resource_type, %w(page)) %>

  <div class="form__field js-resource-field" data-name="title">
    <%= f.label :title, class: 'form__label' %>
    <%= f.text_field :title, class: 'form__input' %>
  </div>

  <div class="form__field js-resource-field" data-name="introduction">
    <%= f.label :introduction, class: 'form__label' %>
    <%= f.text_area :introduction, class: 'form__textarea' %>
  </div>

  <div class="form__field js-resource-field" data-name="external_reference">
    <%= f.label :external_reference, class: 'form__label' %>
    <%= f.text_field :external_reference, class: 'form__input' %>
  </div>

  <div class="form__field js-resource-field" data-name="upload">
    <%= f.label :upload, class: 'form__label' %>
    <% if @resource.upload %>
    <div class="r-resource-upload"
         data-input-id="resource_uploads_id"
         data-valid-types="audio/mp3|audio/mpeg"
         data-file-src="<%= @resource.upload.file.try(:remote_url) %>"
         data-file-type="<%= @resource.upload.meta['type'] %>">
    </div>
    <% else %>
    <div class="r-resource-upload"
         data-input-id="resource_uploads_id"
         data-valid-types="audio/mp3|audio/mpeg">
    </div>
    <% end %>
    <%= f.hidden_field :uploads_id %>
  </div>

  <div class="form__field js-resource-field" data-name="body">
    <%= f.label :body, class: 'form__label' %>
    <%= f.text_field :body, class: 'form__input' %>
  </div>

</section>

<section class="m-admin-body--sidebar">
  <%= f.submit 'Save', class: 'form__submit u-btn u-btn--primary u-btn--100' %>

  <div class="form__field">
    <%= f.label :people_id, 'Author', class: 'form__label form__check-box-label' %>
    <div class="form__select">
      <%= f.select :people_id,
        Person.pluck(:display_name, :id),
        { include_blank: true },
        { class: 'form__input form__input--select' }  %>
    </div>
  </div>

  <hr />

  <div class="form__field">
    <%= f.label :display_date, class: 'form__label' %>
    <%= f.date_field :display_date, class: 'form__input' %>
  </div>

  <hr />

  <%= f.label :bible_reference, class: 'form__label' %>
  <%= reference_picker(f) %>

  <hr />

  <div class="r-featureImageSelector"
      data-inputId="resource_graphics_id"
      data-selectImageId=""
      data-selectedImageThumbnail=""></div>
  
  <%= f.text_field :graphics_id %>

  <hr />

  <div class="form__field">
    <%= f.label :grouping, class: 'form__label' %>
    <%= f.select :grouping_ids, @groupings.pluck(:title, :id), { include_blank: 'Ungrouped' }, class: 'form__input form__input--multiselect', multiple: true %>
  </div>

  <hr />

  Advanced

  <% if @resource.slug_can_be_changed? %>
    <div class="form__field">
      <%= f.label :slug, class: 'form__label' %>
      <%= f.text_field :slug, class: 'form__input js-slug-field', data: {'from-input-id': 'resource_title'} %>
    </div>
  <% end %>

</section>

<% end %>
