<% if image_block.file && image_block.file[:url] -%>
<figure class="st-image st-image--<%= image_block[:type] %>">
  
  <% case image_block[:type]
     when "inline" %>
    <%= responsive_image_tag(
      image_block.file[:sources],
      sizes: [
        '(min-width: 650px) 650px',
        'calc(100vw - 120px)'
      ],
      alt: image_block.caption
      ) %>
  <% when "fullwidth" %>
    <%= responsive_image_tag(
      image_block.file[:sources],
      sizes: [
        '(min-width: 1200px) 1200px',
        'calc(100vw - 80px)'
      ],
      alt: image_block.caption
      ) %>
  <% else %>
    <%= responsive_image_tag(
      image_block.file[:sources],
      sizes: [
        '(min-width: 768px) calc(50vw - 120px)',
        '(min-width: 992px) calc(50vw - 100px)',
        '(min-width: 1200px) 600px',
        'calc(100vw - 120px)'
      ],
      alt: image_block.caption
      ) %>
  <% end %>

  <% if image_block.caption %>
  <figcaption class="st-image__caption">
    <%= image_block.caption %>
  </figcaption>
  <% end %>
</figure>
<% end -%>
